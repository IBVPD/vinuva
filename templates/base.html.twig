{% extends '@ColorAdmin/layout.html.twig' %}

{% block pagetitle %}CENTINELA{% endblock %}
{% block page_header %}{% endblock %}

{% block navbar_logo_title %}New Vaccines Surveillance System - VINUVA{% endblock %}
{% block navbar_logo %}{% endblock %}

{% block header_search %}{% endblock %}
{% block header_message_menu_button %}{% endblock %}
{% block header_message_menu_dropdown %}{% endblock %}

{% block header_user_menu_button %}
    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
        <i class="fa fa-user fa-2x"></i>
        <span class="d-none d-md-inline">{{ app.user }}</span>
        <b class="caret"></b>
    </a>
{% endblock %}

{% block header_user_menu_dropdown %}
    <div class="dropdown-menu dropdown-menu-right">
        <a href="{{ path('userProfile') }}" class="dropdown-item">{{'Edit Profile'|trans}}</a>
        <div class="dropdown-divider"></div>
        <a href="{{ path('logout') }}" class="dropdown-item">{{ 'Log Out'|trans }}</a>
    </div>
{% endblock %}

{% block year_month_filter_row %}
    <div class="row form-group m-b-15">
        {{ form_label(form) }}
        <div class="col-md-9 field-wrapper">
            <div class="row">
                <div class="col-sm-6">
                    {{ form_widget(form.month) }}
                </div>
                <div class="col-sm-6">
                    {{ form_widget(form.year) }}
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block page_js %}
    {% if filterForm.hospital is defined and filterForm.country is defined %}
        <script type="text/javascript">
            $(document).ready(function () {
                let hospital = $('#{{ filterForm.hospital.vars.id }}');
                let country = $('#{{ filterForm.country.vars.id }}');

                if (country.val() > 0) {
                    hospital.find('option[value!=""]').prop('disabled', true).hide();
                    hospital.find('option[data-country="' + country.val() + '"]').prop('disabled', false).show();
                }

                country.change(function () {
                    hospital.find('option[value!=""]').prop('disabled', true).hide();
                    hospital.find('option[data-country="' + country.val() + '"]').prop('disabled', false).show();
                    if (hospital.find('option:selected').prop('disabled')) {
                        hospital.val('');
                    }
                });
            });
        </script>
    {% endif %}
{% endblock %}
