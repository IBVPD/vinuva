{% extends 'base.html.twig' %}

{% import '@App/Report/Hospital/summary-blocks.html.twig' as globals %}

{% block content %}
    <div class="panel panel-inverse">
        <div class="panel-heading">
            <div class="panel-heading-btn">
                <a href="#panelFilters" data-toggle="collapse" class="btn btn-sm btn-icon btn-circle btn-warning" title="Filter"><i class="fa fa-search"></i></a>
            </div>
            <h4 class="panel-title">Summary by Hospitals</h4>
        </div>

        <div class="panel-body">
            <div class="collapse well filters clearfix" id="panelFilters">
                {{ form_start(filterForm) }}
                {{ form_rest(filterForm) }}
                <button class="btn btn-warning" name="{{ filterForm.vars.name }}[reset]"><i class="fa fa-refresh"></i> Reset</button>
                <button type="submit" class="pull-right btn btn-success"><i class="fa fa-search"></i> Search</button>
                {{ form_end(filterForm) }}
            </div>

            <fieldset>
                <table class="table m-b-0">
                    {% for countryCollection in results %}
                        <tr>
                            <td class="info" colspan="10">{{ countryCollection.country.name }}</td>
                        </tr>
                        {% if countryCollection.hasMeningitisCases %}
                            {{ globals.meningitis(countryCollection) }}
                        {% endif %}
                        {% if countryCollection.hasPneumoniaCases %}
                            {{ globals.pneumonia(countryCollection) }}
                        {% endif %}
                        {% if countryCollection.hasRotavirusCases %}
                            {{ globals.rotavirus(countryCollection) }}
                        {% endif %}
                    {% endfor %}
                </table>
            </fieldset>
        </div>
    </div>
{% endblock %}

