{% extends 'base.html.twig' %}

{% form_theme filterForm _self %}

{% import '@App/Report/Monthly/summary-blocks.html.twig' as globals %}

{% block content %}

    <div class="panel panel-inverse">
        <div class="panel-heading">
            <div class="panel-heading-btn">
                <a href="#panelFilters" data-toggle="collapse" class="btn btn-sm btn-icon btn-circle btn-warning" title="Filter"><i class="fa fa-search"></i></a>
            </div>
            <h4 class="panel-title">Monthly Summary</h4>
        </div>

        <div class="panel-body">
            <div class="collapse well filters clearfix" id="panelFilters">
                {{ form_start(filterForm) }}
                {{ form_rest(filterForm) }}
                <button class="btn btn-warning" name="{{ filterForm.vars.name }}[reset]"><i class="fa fa-refresh"></i>
                    Reset
                </button>
                <button type="submit" class="pull-right btn btn-success"><i class="fa fa-search"></i> Search</button>
                {{ form_end(filterForm) }}
            </div>
            <fieldset>
{#                <pre>{{ dump(results) }}</pre>#}
                <table class="table m-b-0">
                    {% for diseaseName,cases in results %}
                        {% if diseaseName is same as('Meningitis') %}
                            {{ globals.meningitis_summary(diseaseName, cases) }}
                        {% endif %}
                        {% if diseaseName is same as('Pneumonia') %}
                            {{ globals.pneumonia_summary(diseaseName, cases) }}
                        {% endif %}
                        {% if diseaseName is same as('Rotavirus') %}
                            {{ globals.rotavirus_summary(diseaseName, cases) }}
                        {% endif %}

                    {% endfor %}
                </table>
            </fieldset>
        </div>
        <div class="panel-footer"></div>
    </div>
{% endblock %}
